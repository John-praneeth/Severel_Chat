# Configuration version (required)
version: 1.2.1

# Cache settings
cache: true

# Custom interface configuration
interface:
  customWelcome: "Welcome to LibreChat! Enjoy your experience."
  mcpServers:
    placeholder: "Select MCP Server"
  fileSearch: true
  privacyPolicy:
    externalUrl: 'https://librechat.ai/privacy-policy'
    openNewTab: true
  termsOfService:
    externalUrl: 'https://librechat.ai/tos'
    openNewTab: true
    modalAcceptance: true
    modalTitle: "Terms of Service for LibreChat"
    modalContent: |
      # Terms and Conditions for LibreChat
      # ... (keep your existing terms content)
  endpointsMenu: true
  modelSelect: true
  parameters: true
  sidePanel: true
  presets: true
  prompts: true
  bookmarks: true
  multiConvo: true
  agents: true

# Registration settings
registration:
  socialLogins: ['github', 'google', 'discord', 'openid', 'facebook', 'apple', 'saml']

# Actions configuration
actions:
  allowedDomains:
    - "swapi.dev"
    - "librechat.ai"
    - "google.com"

# ✅ CORRECTED MCP Servers Configuration
mcpServers:
  notion:
    type: stdio
    command: npx
    args:
      - -y
      - "@notionhq/notion-mcp-server"
    env:
      NOTION_TOKEN: "${NOTION_API_KEY}"
    timeout: 60000
    iconPath: /app/client/public/assets/notion-icon.svg

  filesystem:
    type: stdio
    command: npx
    args:
      - -y
      - "@modelcontextprotocol/server-filesystem"
      - /app/uploads
    timeout: 60000
    iconPath: /app/client/public/assets/folder-icon.svg
  
  memory:
    type: stdio
    command: npx
    args:
      - -y
      - "@modelcontextprotocol/server-memory"
    timeout: 60000
    iconPath: /app/client/public/assets/brain-icon.svg
  
  sequential-thinking:
    type: stdio
    command: npx
    args:
      - -y
      - "@modelcontextprotocol/server-sequential-thinking"
    timeout: 60000
    iconPath: /app/client/public/assets/thinking-icon.svg
  
  everything:
    type: stdio
    command: npx
    args:
      - -y
      - "@modelcontextprotocol/server-everything"
    timeout: 60000
    iconPath: /app/client/public/assets/star-icon.svg
  
  # puppeteer server removed to avoid startup timeouts in local/dev environments
  # puppeteer:
  #   type: stdio
  #   command: npx
  #   args:
  #     - -y
  #     - "puppeteer-mcp-server"
  #   timeout: 600000
  #   iconPath: /app/client/public/assets/web-icon.svg
      
# ✅ CORRECTED Endpoints Configuration (merged sections)
endpoints:
  agents:
    disableBuilder: false
    pollIntervalMs: 750
    timeoutMs: 180000
  custom:
    # OpenAI Configuration
    - name: 'OpenAI'
      apiKey: '${OPENAI_API_KEY}'
      baseURL: 'https://api.openai.com/v1'
      models:
        default: ['gpt-4o', 'gpt-4o-mini', 'gpt-3.5-turbo']
        fetch: true
      titleConvo: true
      titleModel: 'gpt-3.5-turbo'
      modelDisplayLabel: 'OpenAI'

    - name: 'groq'
      apiKey: '${GROQ_API_KEY}'
      baseURL: 'https://api.groq.com/openai/v1/'
      models:
        default: ['llama3-70b-8192', 'llama3-8b-8192', 'llama2-70b-4096', 'mixtral-8x7b-32768', 'gemma-7b-it']
        fetch: false
      titleConvo: true
      titleModel: 'mixtral-8x7b-32768'
      modelDisplayLabel: 'groq'

    - name: 'Mistral'
      apiKey: '${MISTRAL_API_KEY}'
      baseURL: 'https://api.mistral.ai/v1'
      models:
        default: ['mistral-tiny', 'mistral-small', 'mistral-medium']
        fetch: true
      titleConvo: true
      titleModel: 'mistral-tiny'
      modelDisplayLabel: 'Mistral'
      dropParams: ['stop', 'user', 'frequency_penalty', 'presence_penalty']

    - name: 'OpenRouter'
      apiKey: '${OPENROUTER_KEY}'
      baseURL: 'https://openrouter.ai/api/v1'
      models:
        default: ['meta-llama/llama-3-70b-instruct']
        fetch: true
      titleConvo: true
      titleModel: 'meta-llama/llama-3-70b-instruct'
      dropParams: ['stop']
      modelDisplayLabel: 'OpenRouter'

# ✅ Google AI Configuration
    - name: 'Google'
      apiKey: '${GOOGLE_KEY}'
      baseURL: 'https://generativelanguage.googleapis.com/v1'
      models:
        default: [
          'gemini-2.5-pro',
          'gemini-2.5-flash', 
          'gemini-2.5-flash-lite-preview-06-17',
          'gemini-2.0-flash-001',
          'gemini-2.0-flash-lite-001'
        ]
        fetch: false
      titleConvo: true
      titleModel: 'gemini-2.5-pro'
      modelDisplayLabel: 'Google'
      iconURL: 'https://developers.google.com/static/images/favicon-new.ico'